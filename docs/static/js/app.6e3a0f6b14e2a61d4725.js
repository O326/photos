webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},o,!1,function(t){n("gsu9")},null,null).exports,s=n("/ocq"),r={name:"PhotoSwiper",props:{item:{type:Object},swiperOption:{type:Object,default:function(){return{spaceBetween:30,effect:"fade",pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}}},data:function(){return{}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"photo-swiper"},[n("swiper",{attrs:{options:t.swiperOption}},[t._l(t.item.imgs,function(e,a){return n("swiper-slide",{key:a},[n("img",{staticClass:"swiper-img",attrs:{src:t.item.imgHost+e,alt:t.item.title}})])}),t._v(" "),n("div",{staticClass:"swiper-pagination swiper-pagination-white",attrs:{slot:"pagination"},slot:"pagination"}),t._v(" "),n("div",{staticClass:"swiper-button-prev swiper-button-white",attrs:{slot:"button-prev"},slot:"button-prev"}),t._v(" "),n("div",{staticClass:"swiper-button-next swiper-button-white",attrs:{slot:"button-next"},slot:"button-next"})],2)],1)},staticRenderFns:[]};var l=n("VU/8")(r,p,!1,function(t){n("ybXI")},"data-v-019d7b0e",null).exports,c=n("//Fk"),u=n.n(c),d=n("aozt"),m=n.n(d),v=n("6iV/"),g=n.n(v);function f(){location.href=location.origin+location.pathname+"#/login"}function h(){return t="//webhostapi.000webhostapp.com/database/blog/query.php",new u.a(function(e,n){return m.a.get(t).then(function(t){200===t.status?e(t.data):n(t)}).catch(function(t){n(t)})});var t}var _={name:"Home",components:{PhotoSwiper:l},data:function(){return{blogs:[]}},mounted:function(){var t=this;h().then(function(e){t.blogs=e.map(function(t){return{id:t.id,created_at:t.created_at,updated_at:t.updated_at,title:t.title,type:t.type,content:t.content,imgs:JSON.parse(t.img_keys),imgHost:t.img_host,location:t.location}})}).catch(function(t){console.error(t)})}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-page"},[e("header",[e("h1",[this._v("全锋的相册")]),this._v(" "),e("p",[this._v("发现美丽瞬间 用心体验生活")]),this._v(" "),e("div",{staticClass:"photo-content"},this._l(this.blogs,function(t){return e("photo-swiper",{key:t.id,attrs:{item:t}})}))])])},staticRenderFns:[]};var w=n("VU/8")(_,b,!1,function(t){n("T42v")},"data-v-a92bd1ba",null).exports,y={name:"Login",data:function(){return{account:"",pwd:""}},mounted:function(){},methods:{onSubmit:function(){var t=this,e=this.account,n=this.pwd;e&&n?m.a.get("//webhostapi.000webhostapp.com/database/login.php?account="+e+"&pwd="+n).then(function(e){"SUCCESS"===e.data?(localStorage.setItem("last_login_time",+new Date),t.$router.back()):alert(e.data)}):alert("请输入密码或账号")}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-page"},[n("h1",[t._v("登录")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"text",placeholder:" 请输入密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.onSubmit}},[t._v("登录")])])},staticRenderFns:[]};var x=n("VU/8")(y,C,!1,function(t){n("zTlm")},"data-v-6256f0cf",null).exports,T=n("mvHQ"),I=n.n(T),k=n("9CKM"),P="#1BA7DE",E="#FF0000",D="//pdtqbf99x.bkt.clouddn.com/",O="//webhostapi.000webhostapp.com/database/blog/",U={CREATE:O+"create.php",QUERY:O+"query.php",UPDATE:O+"update.php",DELETE:O+"delete.php"},q={name:"Post",data:function(){return{sTitle:"",sContent:"",sCate:"",sLocation:"",sDate:"",sType:"0",sImgArr:[],uploadPercent:"0%",uploadOpacity:1,uploadColor:P,previewImg:""}},mounted:function(){var t=this;m.a.get("//webhostapi.000webhostapp.com/qiniu-api/upload-tokens.php").then(function(e){t.initFileInput(e.data)})},methods:{initFileInput:function(t){var e={useCdnDomain:!0,region:k.region.z2},n={fname:"",params:{},mimeType:null},a=this;$("#select").change(function(){var o=this.files[0],i=o.name,s=k.upload(o,i,t,n,e);a.uploadColor=P;s.subscribe(function(t){var e=t.total.percent+"%";a.uploadPercent=e,a.uploadOpacity=.6},function(){a.uploadPercent="100%",a.uploadOpacity=.4,a.uploadColor=E,a.btnText="网络错误请重试"},function(t){console.log(t),setTimeout(function(){a.uploadOpacity=0},1e3),a.getImageInfo(t),a.sImgArr.push(t.key)})})},getImageInfo:function(t){k.exif(t.key,D).then(function(t){console.log(t)})},getImgUrl:function(t){return D+t},onDeleteImg:function(t){console.log(t.target.getAttribute("data-index"))},onSubmit:function(){var t=this.sTitle,e=this.sType,n=this.sContent,a=this.sDate,o=this.sLocation,i=this.sImgArr;t&&a&&o&&a&&i.length?this.postData({title:t,type:e||"0",content:n,location:o,date:a,img_keys:I()(i),img_host:D}):alert("请填写内容，上传图片")},postData:function(t){(function(t,e){return new u.a(function(n,a){var o=+new Date,i=localStorage.getItem("last_login_time");if(!(i&&o-parseInt(i)>36e5))return m()({method:"post",url:t,headers:{"Content-type":"application/x-www-form-urlencoded"},data:g.a.stringify(e)}).then(function(t){"SUCCESS"===t.data?n(t.data):0===t.data.indexOf("UNLOGIN")?f():alert(t.data)});f()})})(U.CREATE,t).then(function(){alert("插入成功")})}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-page"},[n("div",{staticClass:"form-box"},[n("h1",[t._v("新建说说")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sTitle,expression:"sTitle"}],attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.sTitle},on:{input:function(e){e.target.composing||(t.sTitle=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sContent,expression:"sContent"}],attrs:{type:"text",placeholder:"请输入内容（200字以内）"},domProps:{value:t.sContent},on:{input:function(e){e.target.composing||(t.sContent=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sLocation,expression:"sLocation"}],attrs:{type:"text",placeholder:"请输入地点"},domProps:{value:t.sLocation},on:{input:function(e){e.target.composing||(t.sLocation=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sDate,expression:"sDate"}],attrs:{type:"date",placeholder:"请选择时间"},domProps:{value:t.sDate},on:{input:function(e){e.target.composing||(t.sDate=e.target.value)}}}),t._v(" "),n("div",{staticClass:"radio-group"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sType,expression:"sType"}],attrs:{type:"radio",value:"0"},domProps:{checked:t._q(t.sType,"0")},on:{change:function(e){t.sType="0"}}}),n("span",[t._v("图片")])]),t._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sType,expression:"sType"}],attrs:{type:"radio",value:"1",disabled:""},domProps:{checked:t._q(t.sType,"1")},on:{change:function(e){t.sType="1"}}}),n("span",[t._v("文字")])]),t._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sType,expression:"sType"}],attrs:{type:"radio",value:"2",disabled:""},domProps:{checked:t._q(t.sType,"2")},on:{change:function(e){t.sType="2"}}}),n("span",[t._v("视频")])])]),t._v(" "),n("div",{staticClass:"btn"},[n("span",[t._v("+上传图片")]),t._v(" "),n("div",{staticClass:"file-progress",style:{width:t.uploadPercent,opacity:t.uploadOpacity,background:t.uploadColor}}),t._v(" "),n("input",{staticClass:"file-input",attrs:{type:"file",id:"select",accept:"image/*"}})]),t._v(" "),t._l(t.sImgArr,function(e,a){return n("div",{key:e,staticClass:"preview-img",attrs:{"data-index":a},on:{click:t.onDeleteImg}},[n("img",{attrs:{src:t.getImgUrl(e),width:"100%"}})])}),t._v(" "),n("div",{staticClass:"btn btn-submit",on:{click:t.onSubmit}},[t._v("提交")])],2)])},staticRenderFns:[]};var S=n("VU/8")(q,F,!1,function(t){n("q0uG")},"data-v-b3141a52",null).exports,N="#1BA7DE",A="#FF0000",L={name:"Upload",data:function(){return{logo:"//qiniu.staticfile.org/static/images/qiniu_logo.5249e634.png",title:"七牛云图片上传",btnText:"选择文件",uploadPercent:"0%",uploadOpacity:1,uploadColor:N,previewImg:""}},mounted:function(){var t=this;m.a.get("//webhostapi.000webhostapp.com/qiniu-api/upload-tokens.php").then(function(e){t.initFileInput(e.data)})},methods:{initFileInput:function(t){var e={useCdnDomain:!0,region:k.region.z2},n={fname:"",params:{},mimeType:null},a=this;$("#select").change(function(){var o=this.files[0],i=o.name,s=k.upload(o,i,t,n,e);a.uploadColor=N;s.subscribe(function(t){var e=t.total.percent+"%";a.uploadPercent=e,a.uploadOpacity=.6},function(){a.uploadPercent="100%",a.uploadOpacity=.4,a.uploadColor=A,a.btnText="网络错误请重试"},function(t){console.log(t),setTimeout(function(){a.uploadOpacity=0},1e3),a.getImageInfo(t),a.previewImg="//pdtqbf99x.bkt.clouddn.com/"+t.key})})},getImageInfo:function(t){k.exif(t.key,"//pdtqbf99x.bkt.clouddn.com/").then(function(t){console.log(t)})},onCopyImgUrl:function(){}}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-page"},[n("img",{staticClass:"logo",attrs:{src:t.logo,alt:t.title}}),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"upload-box"},[n("span",[t._v(t._s(t.btnText))]),t._v(" "),n("div",{staticClass:"file-progress",style:{width:t.uploadPercent,opacity:t.uploadOpacity,background:t.uploadColor}}),t._v(" "),n("input",{staticClass:"file-input",attrs:{type:"file",id:"select"}})]),t._v(" "),n("div",{staticClass:"preview-box"},[n("div",{staticClass:"preview-img",on:{click:t.onCopyImgUrl}},[n("img",{attrs:{src:t.previewImg,alt:t.previewImg,height:"100%"}})]),t._v(" "),n("p",[n("a",{attrs:{href:t.previewImg}},[t._v(t._s(t.previewImg))])])])])},staticRenderFns:[]};var H=n("VU/8")(L,R,!1,function(t){n("RXZ9")},"data-v-6efd2d7a",null).exports;a.a.use(s.a);var V=new s.a({routes:[{path:"/",name:"Home",component:w},{path:"/Login",name:"Login",component:x},{path:"/Post",name:"Post",component:S},{path:"/upload",name:"Upload",component:H}]}),z=n("DMPO"),X=n.n(z);n("Wtgt");a.a.config.productionTip=!1,a.a.use(X.a),new a.a({el:"#app",router:V,components:{App:i},template:"<App/>"})},RXZ9:function(t,e){},T42v:function(t,e){},Wtgt:function(t,e){},gsu9:function(t,e){},q0uG:function(t,e){},ybXI:function(t,e){},zTlm:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6e3a0f6b14e2a61d4725.js.map